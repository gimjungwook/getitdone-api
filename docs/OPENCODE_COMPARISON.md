# OpenCode vs opencode-api ê¸°ëŠ¥ ë¹„êµ ë¶„ì„

> ë¶„ì„ì¼: 2026-01-28
>
> ì›ë³¸ TypeScript OpenCodeì™€ Python opencode-apiì˜ ê¸°ëŠ¥ ë¹„êµ ë° í´ë¡  ê³„íš

---

## ê°œìš”

| í•­ëª© | ì›ë³¸ TypeScript OpenCode | Python opencode-api |
|-----|-------------------------|---------------------|
| ìš©ë„ | ê°œë°œììš© AI ì½”ë”© ì—ì´ì „íŠ¸ CLI | êµìœ¡ í”Œë«í¼ìš© ì›¹ API |
| ëŸ°íƒ€ì„ | Bun | Python 3.11+ / FastAPI |
| ì•„í‚¤í…ì²˜ | Namespace íŒ¨í„´, ì´ë²¤íŠ¸ ê¸°ë°˜ | í´ë˜ìŠ¤ ê¸°ë°˜, ì§ì ‘ í˜¸ì¶œ |
| ê²½ë¡œ | `/packages/opencode/src/` | `/opencode-api/src/opencode_api/` |

---

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ (ì•½ 20-25%)

| ì˜ì—­ | ì›ë³¸ ê¸°ëŠ¥ ìˆ˜ | Python êµ¬í˜„ | ë¹„ìœ¨ |
|-----|-------------|------------|------|
| Session | 13 ê¸°ëŠ¥ | 4 ê¸°ëŠ¥ | **31%** |
| Provider | 21 í”„ë¡œë°”ì´ë” | 4 í”„ë¡œë°”ì´ë” | **19%** |
| Tool | 24 ë„êµ¬ | 5 ë„êµ¬ | **21%** |
| Server | 15 ë¼ìš°íŠ¸ ê·¸ë£¹ | 5 ë¼ìš°íŠ¸ ëª¨ë“ˆ | **33%** |
| ê¸°íƒ€ (MCP, LSP, Permission, Snapshot, Plugin) | 5 ì‹œìŠ¤í…œ | 0 ì‹œìŠ¤í…œ | **0%** |

---

## 1. Session ê´€ë¦¬

### êµ¬í˜„ ìƒíƒœ

| ê¸°ëŠ¥ | ì›ë³¸ íŒŒì¼ | Python íŒŒì¼ | ìƒíƒœ |
|-----|----------|------------|------|
| ì„¸ì…˜ ìƒì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ | `session/index.ts` | `session/session.py` | âœ… êµ¬í˜„ë¨ |
| ë©”ì‹œì§€ íŒŒíŠ¸ ì‹œìŠ¤í…œ | `message-v2.ts` | `message.py` | âš ï¸ ê°„ì†Œí™”ë¨ |
| ë©”ì‹œì§€ ìŠ¤íŠ¸ë¦¬ë° | `processor.ts` + `llm.ts` | `prompt.py` | âœ… êµ¬í˜„ë¨ |
| ì„¸ì…˜ ì••ì¶• (Compaction) | `compaction.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| ìŠ¤ëƒ…ìƒ·/ë˜ëŒë¦¬ê¸° | `revert.ts` + `Snapshot` | - | âŒ ë¯¸êµ¬í˜„ |
| ì„¸ì…˜ ìš”ì•½ | `summary.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| ì„¸ì…˜ ê³µìœ  | `share/share-next.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| ì„¸ì…˜ í¬í¬ | `Session.fork()` | - | âŒ ë¯¸êµ¬í˜„ |
| ë¹„ìš© ê³„ì‚° | `Session.getUsage()` | ê¸°ë³¸ í† í°ë§Œ | âš ï¸ ê°„ì†Œí™”ë¨ |
| ì„¸ì…˜ ìƒíƒœ | `status.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| ì¬ì‹œë„ ë¡œì§ | `retry.ts` | - | âŒ ë¯¸êµ¬í˜„ |

### ë¯¸êµ¬í˜„ ê¸°ëŠ¥ ìƒì„¸

#### ì„¸ì…˜ ì••ì¶• (Compaction)
- **ì›ë³¸ ìœ„ì¹˜**: `session/compaction.ts`
- **ê¸°ëŠ¥**: ëŒ€í™”ê°€ ê¸¸ì–´ì§€ë©´ ì´ì „ ë©”ì‹œì§€ë¥¼ ìš”ì•½í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ê´€ë¦¬
- **ì¤‘ìš”ë„**: ğŸ”´ ë†’ìŒ (ê¸´ ëŒ€í™” ì‹œ í•„ìˆ˜)

#### ì„¸ì…˜ ìš”ì•½ (Summary)
- **ì›ë³¸ ìœ„ì¹˜**: `session/summary.ts`
- **ê¸°ëŠ¥**: íŒŒì¼ ë³€ê²½ í†µê³„ ê³„ì‚° (additions, deletions, files)
- **ì¤‘ìš”ë„**: ğŸŸ¡ ì¤‘ê°„

#### ìŠ¤ëƒ…ìƒ·/ë˜ëŒë¦¬ê¸°
- **ì›ë³¸ ìœ„ì¹˜**: `session/revert.ts`, `snapshot/index.ts`
- **ê¸°ëŠ¥**: Git ê¸°ë°˜ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì„¸ì…˜ ìƒíƒœ ë˜ëŒë¦¬ê¸°
- **ì¤‘ìš”ë„**: ğŸŸ¡ ì¤‘ê°„ (êµìœ¡ í”Œë«í¼ì—ì„œëŠ” ë‚®ìŒ)

---

## 2. Provider (LLM í†µí•©)

### êµ¬í˜„ ìƒíƒœ

| í”„ë¡œë°”ì´ë” | ì›ë³¸ | Python | ìƒíƒœ |
|-----------|------|--------|------|
| Anthropic Claude | âœ… | âœ… `anthropic.py` | âœ… êµ¬í˜„ë¨ |
| OpenAI | âœ… | âœ… `openai.py` | âœ… êµ¬í˜„ë¨ |
| Google Gemini | âœ… | âœ… `gemini.py` | âœ… êµ¬í˜„ë¨ |
| LiteLLM | âŒ | âœ… `litellm.py` | âœ… Python ì „ìš© |
| Amazon Bedrock | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Azure OpenAI | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Google Vertex | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| OpenRouter | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| GitHub Copilot | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| xAI/Grok | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Mistral | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Groq | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| DeepInfra | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Cerebras | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Cohere | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Together AI | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Perplexity | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| GitLab | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| Cloudflare | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |
| SAP AI Core | âœ… | âŒ | âŒ ë¯¸êµ¬í˜„ |

### ì¶”ê°€ í”„ë¡œë°”ì´ë” êµ¬í˜„ ë°©ë²•
- LiteLLMì„ í†µí•´ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥
- `provider/litellm.py` í™•ì¥ìœ¼ë¡œ OpenRouter, Groq, Mistral ë“± ì§€ì›

---

## 3. Tool System

### êµ¬í˜„ ìƒíƒœ

| ë„êµ¬ | ì›ë³¸ íŒŒì¼ | Python íŒŒì¼ | ìƒíƒœ |
|-----|----------|------------|------|
| Tool ì¶”ìƒí™” | `tool/tool.ts` | `tool/tool.py` | âœ… êµ¬í˜„ë¨ |
| Tool ë ˆì§€ìŠ¤íŠ¸ë¦¬ | `registry.ts` | `__init__.py` | âš ï¸ ê°„ì†Œí™”ë¨ |
| **Question** | `question.ts` | `question.py` | âœ… êµ¬í˜„ë¨ |
| **WebSearch** | `websearch.ts` (Exa) | `websearch.py` (DuckDuckGo) | âš ï¸ ë‹¤ë¥¸ ë°±ì—”ë“œ |
| **WebFetch** | `webfetch.ts` | `webfetch.py` | âœ… êµ¬í˜„ë¨ |
| **Todo** | `todo.ts` | `todo.py` | âœ… êµ¬í˜„ë¨ |
| **Skill** | `skill.ts` | `skill.py` | âš ï¸ ê¸°ë³¸ êµ¬í˜„ |
| **Bash** | `bash.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Edit** | `edit.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Write** | `write.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Read** | `read.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Glob** | `glob.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Grep** | `grep.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Ls** | `ls.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Task** | `task.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Batch** | `batch.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **CodeSearch** | `codesearch.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **LSP** | `lsp.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Plan** | `plan.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Apply Patch** | `apply_patch.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **MultiEdit** | `multiedit.ts` | - | âŒ ë¯¸êµ¬í˜„ |

### ë¯¸êµ¬í˜„ í•µì‹¬ ë„êµ¬ ìƒì„¸

#### Bash ë„êµ¬
- **ê¸°ëŠ¥**: ì…¸ ëª…ë ¹ ì‹¤í–‰, íƒ€ì„ì•„ì›ƒ, ê¶Œí•œ ê²€ì‚¬
- **ë³´ì•ˆ ê³ ë ¤**: êµìœ¡ í”Œë«í¼ì—ì„œëŠ” E2B ìƒŒë“œë°•ìŠ¤ ë˜ëŠ” ì½”ë“œ ì¸í„°í”„ë¦¬í„° ëŒ€ì•ˆ í•„ìš”
- **ì¤‘ìš”ë„**: ğŸ”´ ë†’ìŒ (ì½”ë“œ ì‹¤í–‰ í•„ìš” ì‹œ)

#### Edit/Write ë„êµ¬
- **ê¸°ëŠ¥**: íŒŒì¼ í¸ì§‘/ìƒì„±, í¼ì§€ ë§¤ì¹­, LSP ì§„ë‹¨
- **êµ¬í˜„ ë°©ì•ˆ**: Supabase Storage ë˜ëŠ” E2B ìƒŒë“œë°•ìŠ¤ í™œìš©
- **ì¤‘ìš”ë„**: ğŸ”´ ë†’ìŒ (ì½”ë“œ ì‘ì„± ê¸°ëŠ¥ í•„ìš” ì‹œ)

#### Read/Glob/Grep ë„êµ¬
- **ê¸°ëŠ¥**: íŒŒì¼ ì½ê¸°, íŒ¨í„´ ê²€ìƒ‰, ë‚´ìš© ê²€ìƒ‰
- **êµ¬í˜„ ë°©ì•ˆ**: ì œí•œëœ íŒŒì¼ ì‹œìŠ¤í…œ ë˜ëŠ” ê°€ìƒ í™˜ê²½
- **ì¤‘ìš”ë„**: ğŸŸ¡ ì¤‘ê°„

#### Task ë„êµ¬
- **ê¸°ëŠ¥**: ì„œë¸Œì—ì´ì „íŠ¸ ìœ„ì„
- **ì¤‘ìš”ë„**: ğŸŸ¡ ì¤‘ê°„ (ë³µì¡í•œ ì‘ì—… ë¶„í•  ì‹œ)

---

## 4. Server/API

### êµ¬í˜„ ìƒíƒœ

| ì—”ë“œí¬ì¸íŠ¸ | ì›ë³¸ | Python | ìƒíƒœ |
|-----------|------|--------|------|
| `/session` | `routes/session.ts` | `routes/session.py` | âœ… êµ¬í˜„ë¨ |
| `/session/{id}/message` (SSE) | í†µí•© | `routes/session.py` | âœ… êµ¬í˜„ë¨ |
| `/session/{id}/abort` | í†µí•© | `routes/session.py` | âœ… êµ¬í˜„ë¨ |
| `/provider` | `routes/provider.ts` | `routes/provider.py` | âœ… êµ¬í˜„ë¨ |
| `/event` (SSE) | `server.ts` | `routes/event.py` | âš ï¸ ê¸°ë³¸ êµ¬í˜„ |
| `/question` | `routes/question.ts` | `routes/question.py` | âœ… êµ¬í˜„ë¨ |
| `/agent` | - | `routes/agent.py` | âœ… Python ì „ìš© |
| `/project` | `routes/project.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/config` | `routes/config.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/mcp` | `routes/mcp.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/permission` | `routes/permission.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/file` | `routes/file.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/pty` | `routes/pty.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/tui` | `routes/tui.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/experimental` | `routes/experimental.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| `/global` | `routes/global.ts` | - | âŒ ë¯¸êµ¬í˜„ |

---

## 5. ê¸°íƒ€ ì£¼ìš” ì‹œìŠ¤í…œ

| ì‹œìŠ¤í…œ | ì›ë³¸ ìœ„ì¹˜ | Python | ìƒíƒœ |
|-------|----------|--------|------|
| **MCP** | `mcp/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **LSP** | `lsp/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Plugin** | `plugin/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Permission** | `permission/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Snapshot** | `snapshot/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **ACP** | `acp/` | - | âŒ ë¯¸êµ¬í˜„ |
| **Worktree** | `worktree/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |
| **Scheduler** | `scheduler/index.ts` | - | âŒ ë¯¸êµ¬í˜„ |

---

## êµ¬í˜„ ìš°ì„ ìˆœìœ„

### ğŸŸ¢ ë°”ë¡œ êµ¬í˜„ ê°€ëŠ¥ (ë‚œì´ë„: ë‚®ìŒ)

| ìˆœìœ„ | ê¸°ëŠ¥ | ì„¤ëª… | ì˜ˆìƒ ì‘ì—…ëŸ‰ |
|-----|------|------|-----------|
| 1 | ì¶”ê°€ LLM í”„ë¡œë°”ì´ë” | LiteLLM í™•ì¥ (OpenRouter, Groq ë“±) | 1-2ì‹œê°„ |
| 2 | ì„¸ì…˜ ì œëª© ìë™ ìƒì„± | ì²« ë©”ì‹œì§€ë¡œ ì œëª© ìƒì„± | 1ì‹œê°„ |
| 3 | ì›¹ ê²€ìƒ‰ ê°œì„  | Exa APIë¡œ ì „í™˜ | 2ì‹œê°„ |
| 4 | ë¹„ìš© ê³„ì‚° | models.dev ì—°ë™ | 2-3ì‹œê°„ |

### ğŸŸ¡ ì¤‘ê°„ ë‚œì´ë„

| ìˆœìœ„ | ê¸°ëŠ¥ | ì„¤ëª… | ì˜ˆìƒ ì‘ì—…ëŸ‰ |
|-----|------|------|-----------|
| 5 | ì„¸ì…˜ ì••ì¶• (Compaction) | ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ | 4-6ì‹œê°„ |
| 6 | ì„¸ì…˜ í¬í¬ | ëŒ€í™” ë¶„ê¸° | 2-3ì‹œê°„ |
| 7 | Read ë„êµ¬ | íŒŒì¼ ì½ê¸° (Storage) | 3-4ì‹œê°„ |
| 8 | Glob/Grep ë„êµ¬ | íŒŒì¼ ê²€ìƒ‰ | 4-5ì‹œê°„ |

### ğŸ”´ ê³ ë‚œì´ë„ (ì„¤ê³„ ë³€ê²½ í•„ìš”)

| ìˆœìœ„ | ê¸°ëŠ¥ | ì„¤ëª… | ì˜ˆìƒ ì‘ì—…ëŸ‰ |
|-----|------|------|-----------|
| 9 | Edit/Write ë„êµ¬ | íŒŒì¼ ìˆ˜ì • (ìƒŒë“œë°•ìŠ¤) | 1-2ì¼ |
| 10 | Bash ë„êµ¬ | ì½”ë“œ ì‹¤í–‰ (ë³´ì•ˆ) | 1-2ì¼ |
| 11 | MCP í†µí•© | ì™¸ë¶€ ì„œë²„ ì—°ê²° | 2-3ì¼ |
| 12 | Snapshot/Revert | ë˜ëŒë¦¬ê¸° | 1-2ì¼ |

### âŒ êµìœ¡ í”Œë«í¼ì— ë¶€ì í•©

- CLI/TUI ì¸í„°í˜ì´ìŠ¤
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ì§ì ‘ ì ‘ê·¼
- PTY (í„°ë¯¸ë„) ê¸°ëŠ¥
- Git Worktree ê´€ë¦¬

---

## êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ê¸°ë³¸ ê°œì„ 
- [ ] ì¶”ê°€ LLM í”„ë¡œë°”ì´ë” (LiteLLM í™•ì¥)
- [ ] ì„¸ì…˜ ì œëª© ìë™ ìƒì„±
- [ ] ì›¹ ê²€ìƒ‰ ê°œì„  (Exa API)
- [ ] ë¹„ìš© ê³„ì‚° (models.dev)

### Phase 2: ì„¸ì…˜ ê³ ê¸‰ ê¸°ëŠ¥
- [ ] ì„¸ì…˜ ì••ì¶• (Compaction)
- [ ] ì„¸ì…˜ í¬í¬
- [ ] ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬

### Phase 3: ë„êµ¬ í™•ì¥
- [ ] Read ë„êµ¬
- [ ] Glob ë„êµ¬
- [ ] Grep ë„êµ¬
- [ ] Ls ë„êµ¬

### Phase 4: ê³ ê¸‰ ê¸°ëŠ¥ (ì„ íƒì )
- [ ] Edit/Write ë„êµ¬ (ìƒŒë“œë°•ìŠ¤ í™˜ê²½)
- [ ] Bash ë„êµ¬ (ì½”ë“œ ì¸í„°í”„ë¦¬í„°)
- [ ] MCP ê¸°ë³¸ ì§€ì›
- [ ] Task ë„êµ¬ (ì„œë¸Œì—ì´ì „íŠ¸)

---

## ì°¸ê³  ìë£Œ

### ì›ë³¸ OpenCode ì£¼ìš” íŒŒì¼
- Session: `/packages/opencode/src/session/`
- Provider: `/packages/opencode/src/provider/`
- Tool: `/packages/opencode/src/tool/`
- Server: `/packages/opencode/src/server/`

### Python API ì£¼ìš” íŒŒì¼
- Session: `/opencode-api/src/opencode_api/session/`
- Provider: `/opencode-api/src/opencode_api/provider/`
- Tool: `/opencode-api/src/opencode_api/tool/`
- Routes: `/opencode-api/src/opencode_api/routes/`
